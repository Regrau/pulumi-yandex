// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package yandex

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Allows management of [Yandex Cloud API Gateway](https://cloud.yandex.com/docs/api-gateway/).
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"fmt"
//
//	"github.com/pulumi/pulumi-yandex/sdk/go/yandex"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := yandex.NewApiGateway(ctx, "test-api-gateway", &yandex.ApiGatewayArgs{
//				Description: pulumi.String("any description"),
//				Labels: pulumi.StringMap{
//					"label":       pulumi.String("label"),
//					"empty-label": pulumi.String(""),
//				},
//				CustomDomains: ApiGatewayCustomDomainArray{
//					&ApiGatewayCustomDomainArgs{
//						Fqdn:          pulumi.String("test.example.com"),
//						CertificateId: pulumi.String("<certificate_id_from_cert_manager>"),
//					},
//				},
//				Connectivity: &ApiGatewayConnectivityArgs{
//					NetworkId: pulumi.String("<dynamic network id>"),
//				},
//				Variables: pulumi.StringMap{
//					"installation": pulumi.String("prod"),
//				},
//				Canary: &ApiGatewayCanaryArgs{
//					Weight: pulumi.Int(20),
//					Variables: pulumi.StringMap{
//						"installation": pulumi.String("dev"),
//					},
//				},
//				Spec: pulumi.String(fmt.Sprintf(`openapi: "3.0.0"
//
// info:
//
//	version: 1.0.0
//	title: Test API
//
// x-yc-apigateway:
//
//	variables:
//	  installation:
//	    default: "prod"
//	    enum:
//	     - "prod"
//	     - "dev"
//
// paths:
//
//	/hello:
//	  get:
//	    summary: Say hello
//	    operationId: hello
//	    parameters:
//	      - name: user
//	        in: query
//	        description: User name to appear in greetings
//	        required: false
//	        schema:
//	          type: string
//	          default: 'world'
//	    responses:
//	      '200':
//	        description: Greeting
//	        content:
//	          'text/plain':
//	            schema:
//	              type: "string"
//	    x-yc-apigateway-integration:
//	      type: dummy
//	      http_code: 200
//	      http_headers:
//	        'Content-Type': "text/plain"
//	      content:
//	        'text/plain': "Hello again, {user} from %v release!\n"
//
// `, apigw.Installation)),
//
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type ApiGateway struct {
	pulumi.CustomResourceState

	// Canary release settings of gateway.
	// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
	// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
	Canary ApiGatewayCanaryPtrOutput `pulumi:"canary"`
	// Gateway connectivity. If specified the gateway will be attached to specified network.
	// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
	Connectivity ApiGatewayConnectivityPtrOutput `pulumi:"connectivity"`
	// Creation timestamp of the Yandex Cloud API Gateway.
	CreatedAt pulumi.StringOutput `pulumi:"createdAt"`
	// Set of custom domains to be attached to Yandex API Gateway.
	CustomDomains ApiGatewayCustomDomainArrayOutput `pulumi:"customDomains"`
	// Description of the Yandex Cloud API Gateway.
	Description pulumi.StringPtrOutput `pulumi:"description"`
	// Default domain for the Yandex API Gateway. Generated at creation time.
	Domain pulumi.StringOutput `pulumi:"domain"`
	// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
	FolderId pulumi.StringOutput `pulumi:"folderId"`
	// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
	Labels     pulumi.StringMapOutput `pulumi:"labels"`
	LogGroupId pulumi.StringOutput    `pulumi:"logGroupId"`
	// Yandex Cloud API Gateway name used to define API Gateway.
	Name pulumi.StringOutput `pulumi:"name"`
	// OpenAPI specification for Yandex API Gateway.
	Spec pulumi.StringOutput `pulumi:"spec"`
	// Status of the Yandex API Gateway.
	Status pulumi.StringOutput `pulumi:"status"`
	// (**DEPRECATED**, use `customDomains` instead) Set of user domains attached to Yandex API Gateway.
	//
	// Deprecated: The 'user_domains' field has been deprecated. Please use 'custom_domains' instead.
	UserDomains pulumi.StringArrayOutput `pulumi:"userDomains"`
	// A set of values for variables in gateway specification.
	Variables pulumi.StringMapOutput `pulumi:"variables"`
}

// NewApiGateway registers a new resource with the given unique name, arguments, and options.
func NewApiGateway(ctx *pulumi.Context,
	name string, args *ApiGatewayArgs, opts ...pulumi.ResourceOption) (*ApiGateway, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Spec == nil {
		return nil, errors.New("invalid value for required argument 'Spec'")
	}
	opts = pkgResourceDefaultOpts(opts)
	var resource ApiGateway
	err := ctx.RegisterResource("yandex:index/apiGateway:ApiGateway", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetApiGateway gets an existing ApiGateway resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetApiGateway(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ApiGatewayState, opts ...pulumi.ResourceOption) (*ApiGateway, error) {
	var resource ApiGateway
	err := ctx.ReadResource("yandex:index/apiGateway:ApiGateway", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ApiGateway resources.
type apiGatewayState struct {
	// Canary release settings of gateway.
	// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
	// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
	Canary *ApiGatewayCanary `pulumi:"canary"`
	// Gateway connectivity. If specified the gateway will be attached to specified network.
	// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
	Connectivity *ApiGatewayConnectivity `pulumi:"connectivity"`
	// Creation timestamp of the Yandex Cloud API Gateway.
	CreatedAt *string `pulumi:"createdAt"`
	// Set of custom domains to be attached to Yandex API Gateway.
	CustomDomains []ApiGatewayCustomDomain `pulumi:"customDomains"`
	// Description of the Yandex Cloud API Gateway.
	Description *string `pulumi:"description"`
	// Default domain for the Yandex API Gateway. Generated at creation time.
	Domain *string `pulumi:"domain"`
	// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
	FolderId *string `pulumi:"folderId"`
	// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
	Labels     map[string]string `pulumi:"labels"`
	LogGroupId *string           `pulumi:"logGroupId"`
	// Yandex Cloud API Gateway name used to define API Gateway.
	Name *string `pulumi:"name"`
	// OpenAPI specification for Yandex API Gateway.
	Spec *string `pulumi:"spec"`
	// Status of the Yandex API Gateway.
	Status *string `pulumi:"status"`
	// (**DEPRECATED**, use `customDomains` instead) Set of user domains attached to Yandex API Gateway.
	//
	// Deprecated: The 'user_domains' field has been deprecated. Please use 'custom_domains' instead.
	UserDomains []string `pulumi:"userDomains"`
	// A set of values for variables in gateway specification.
	Variables map[string]string `pulumi:"variables"`
}

type ApiGatewayState struct {
	// Canary release settings of gateway.
	// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
	// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
	Canary ApiGatewayCanaryPtrInput
	// Gateway connectivity. If specified the gateway will be attached to specified network.
	// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
	Connectivity ApiGatewayConnectivityPtrInput
	// Creation timestamp of the Yandex Cloud API Gateway.
	CreatedAt pulumi.StringPtrInput
	// Set of custom domains to be attached to Yandex API Gateway.
	CustomDomains ApiGatewayCustomDomainArrayInput
	// Description of the Yandex Cloud API Gateway.
	Description pulumi.StringPtrInput
	// Default domain for the Yandex API Gateway. Generated at creation time.
	Domain pulumi.StringPtrInput
	// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
	FolderId pulumi.StringPtrInput
	// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
	Labels     pulumi.StringMapInput
	LogGroupId pulumi.StringPtrInput
	// Yandex Cloud API Gateway name used to define API Gateway.
	Name pulumi.StringPtrInput
	// OpenAPI specification for Yandex API Gateway.
	Spec pulumi.StringPtrInput
	// Status of the Yandex API Gateway.
	Status pulumi.StringPtrInput
	// (**DEPRECATED**, use `customDomains` instead) Set of user domains attached to Yandex API Gateway.
	//
	// Deprecated: The 'user_domains' field has been deprecated. Please use 'custom_domains' instead.
	UserDomains pulumi.StringArrayInput
	// A set of values for variables in gateway specification.
	Variables pulumi.StringMapInput
}

func (ApiGatewayState) ElementType() reflect.Type {
	return reflect.TypeOf((*apiGatewayState)(nil)).Elem()
}

type apiGatewayArgs struct {
	// Canary release settings of gateway.
	// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
	// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
	Canary *ApiGatewayCanary `pulumi:"canary"`
	// Gateway connectivity. If specified the gateway will be attached to specified network.
	// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
	Connectivity *ApiGatewayConnectivity `pulumi:"connectivity"`
	// Set of custom domains to be attached to Yandex API Gateway.
	CustomDomains []ApiGatewayCustomDomain `pulumi:"customDomains"`
	// Description of the Yandex Cloud API Gateway.
	Description *string `pulumi:"description"`
	// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
	FolderId *string `pulumi:"folderId"`
	// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
	Labels map[string]string `pulumi:"labels"`
	// Yandex Cloud API Gateway name used to define API Gateway.
	Name *string `pulumi:"name"`
	// OpenAPI specification for Yandex API Gateway.
	Spec string `pulumi:"spec"`
	// A set of values for variables in gateway specification.
	Variables map[string]string `pulumi:"variables"`
}

// The set of arguments for constructing a ApiGateway resource.
type ApiGatewayArgs struct {
	// Canary release settings of gateway.
	// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
	// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
	Canary ApiGatewayCanaryPtrInput
	// Gateway connectivity. If specified the gateway will be attached to specified network.
	// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
	Connectivity ApiGatewayConnectivityPtrInput
	// Set of custom domains to be attached to Yandex API Gateway.
	CustomDomains ApiGatewayCustomDomainArrayInput
	// Description of the Yandex Cloud API Gateway.
	Description pulumi.StringPtrInput
	// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
	FolderId pulumi.StringPtrInput
	// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
	Labels pulumi.StringMapInput
	// Yandex Cloud API Gateway name used to define API Gateway.
	Name pulumi.StringPtrInput
	// OpenAPI specification for Yandex API Gateway.
	Spec pulumi.StringInput
	// A set of values for variables in gateway specification.
	Variables pulumi.StringMapInput
}

func (ApiGatewayArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*apiGatewayArgs)(nil)).Elem()
}

type ApiGatewayInput interface {
	pulumi.Input

	ToApiGatewayOutput() ApiGatewayOutput
	ToApiGatewayOutputWithContext(ctx context.Context) ApiGatewayOutput
}

func (*ApiGateway) ElementType() reflect.Type {
	return reflect.TypeOf((**ApiGateway)(nil)).Elem()
}

func (i *ApiGateway) ToApiGatewayOutput() ApiGatewayOutput {
	return i.ToApiGatewayOutputWithContext(context.Background())
}

func (i *ApiGateway) ToApiGatewayOutputWithContext(ctx context.Context) ApiGatewayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ApiGatewayOutput)
}

// ApiGatewayArrayInput is an input type that accepts ApiGatewayArray and ApiGatewayArrayOutput values.
// You can construct a concrete instance of `ApiGatewayArrayInput` via:
//
//	ApiGatewayArray{ ApiGatewayArgs{...} }
type ApiGatewayArrayInput interface {
	pulumi.Input

	ToApiGatewayArrayOutput() ApiGatewayArrayOutput
	ToApiGatewayArrayOutputWithContext(context.Context) ApiGatewayArrayOutput
}

type ApiGatewayArray []ApiGatewayInput

func (ApiGatewayArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ApiGateway)(nil)).Elem()
}

func (i ApiGatewayArray) ToApiGatewayArrayOutput() ApiGatewayArrayOutput {
	return i.ToApiGatewayArrayOutputWithContext(context.Background())
}

func (i ApiGatewayArray) ToApiGatewayArrayOutputWithContext(ctx context.Context) ApiGatewayArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ApiGatewayArrayOutput)
}

// ApiGatewayMapInput is an input type that accepts ApiGatewayMap and ApiGatewayMapOutput values.
// You can construct a concrete instance of `ApiGatewayMapInput` via:
//
//	ApiGatewayMap{ "key": ApiGatewayArgs{...} }
type ApiGatewayMapInput interface {
	pulumi.Input

	ToApiGatewayMapOutput() ApiGatewayMapOutput
	ToApiGatewayMapOutputWithContext(context.Context) ApiGatewayMapOutput
}

type ApiGatewayMap map[string]ApiGatewayInput

func (ApiGatewayMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ApiGateway)(nil)).Elem()
}

func (i ApiGatewayMap) ToApiGatewayMapOutput() ApiGatewayMapOutput {
	return i.ToApiGatewayMapOutputWithContext(context.Background())
}

func (i ApiGatewayMap) ToApiGatewayMapOutputWithContext(ctx context.Context) ApiGatewayMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ApiGatewayMapOutput)
}

type ApiGatewayOutput struct{ *pulumi.OutputState }

func (ApiGatewayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ApiGateway)(nil)).Elem()
}

func (o ApiGatewayOutput) ToApiGatewayOutput() ApiGatewayOutput {
	return o
}

func (o ApiGatewayOutput) ToApiGatewayOutputWithContext(ctx context.Context) ApiGatewayOutput {
	return o
}

// Canary release settings of gateway.
// * `canary.0.weight` - Percentage of requests, which will be processed by canary release.
// * `canary.0.variables` - A list of values for variables in gateway specification of canary release.
func (o ApiGatewayOutput) Canary() ApiGatewayCanaryPtrOutput {
	return o.ApplyT(func(v *ApiGateway) ApiGatewayCanaryPtrOutput { return v.Canary }).(ApiGatewayCanaryPtrOutput)
}

// Gateway connectivity. If specified the gateway will be attached to specified network.
// * `connectivity.0.network_id` - Network the gateway will have access to. It's essential to specify network with subnets in all availability zones.
func (o ApiGatewayOutput) Connectivity() ApiGatewayConnectivityPtrOutput {
	return o.ApplyT(func(v *ApiGateway) ApiGatewayConnectivityPtrOutput { return v.Connectivity }).(ApiGatewayConnectivityPtrOutput)
}

// Creation timestamp of the Yandex Cloud API Gateway.
func (o ApiGatewayOutput) CreatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.CreatedAt }).(pulumi.StringOutput)
}

// Set of custom domains to be attached to Yandex API Gateway.
func (o ApiGatewayOutput) CustomDomains() ApiGatewayCustomDomainArrayOutput {
	return o.ApplyT(func(v *ApiGateway) ApiGatewayCustomDomainArrayOutput { return v.CustomDomains }).(ApiGatewayCustomDomainArrayOutput)
}

// Description of the Yandex Cloud API Gateway.
func (o ApiGatewayOutput) Description() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringPtrOutput { return v.Description }).(pulumi.StringPtrOutput)
}

// Default domain for the Yandex API Gateway. Generated at creation time.
func (o ApiGatewayOutput) Domain() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.Domain }).(pulumi.StringOutput)
}

// Folder ID for the Yandex Cloud API Gateway. If it is not provided, the default provider folder is used.
func (o ApiGatewayOutput) FolderId() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.FolderId }).(pulumi.StringOutput)
}

// A set of key/value label pairs to assign to the Yandex Cloud API Gateway.
func (o ApiGatewayOutput) Labels() pulumi.StringMapOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringMapOutput { return v.Labels }).(pulumi.StringMapOutput)
}

func (o ApiGatewayOutput) LogGroupId() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.LogGroupId }).(pulumi.StringOutput)
}

// Yandex Cloud API Gateway name used to define API Gateway.
func (o ApiGatewayOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// OpenAPI specification for Yandex API Gateway.
func (o ApiGatewayOutput) Spec() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.Spec }).(pulumi.StringOutput)
}

// Status of the Yandex API Gateway.
func (o ApiGatewayOutput) Status() pulumi.StringOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringOutput { return v.Status }).(pulumi.StringOutput)
}

// (**DEPRECATED**, use `customDomains` instead) Set of user domains attached to Yandex API Gateway.
//
// Deprecated: The 'user_domains' field has been deprecated. Please use 'custom_domains' instead.
func (o ApiGatewayOutput) UserDomains() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringArrayOutput { return v.UserDomains }).(pulumi.StringArrayOutput)
}

// A set of values for variables in gateway specification.
func (o ApiGatewayOutput) Variables() pulumi.StringMapOutput {
	return o.ApplyT(func(v *ApiGateway) pulumi.StringMapOutput { return v.Variables }).(pulumi.StringMapOutput)
}

type ApiGatewayArrayOutput struct{ *pulumi.OutputState }

func (ApiGatewayArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ApiGateway)(nil)).Elem()
}

func (o ApiGatewayArrayOutput) ToApiGatewayArrayOutput() ApiGatewayArrayOutput {
	return o
}

func (o ApiGatewayArrayOutput) ToApiGatewayArrayOutputWithContext(ctx context.Context) ApiGatewayArrayOutput {
	return o
}

func (o ApiGatewayArrayOutput) Index(i pulumi.IntInput) ApiGatewayOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ApiGateway {
		return vs[0].([]*ApiGateway)[vs[1].(int)]
	}).(ApiGatewayOutput)
}

type ApiGatewayMapOutput struct{ *pulumi.OutputState }

func (ApiGatewayMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ApiGateway)(nil)).Elem()
}

func (o ApiGatewayMapOutput) ToApiGatewayMapOutput() ApiGatewayMapOutput {
	return o
}

func (o ApiGatewayMapOutput) ToApiGatewayMapOutputWithContext(ctx context.Context) ApiGatewayMapOutput {
	return o
}

func (o ApiGatewayMapOutput) MapIndex(k pulumi.StringInput) ApiGatewayOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ApiGateway {
		return vs[0].(map[string]*ApiGateway)[vs[1].(string)]
	}).(ApiGatewayOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ApiGatewayInput)(nil)).Elem(), &ApiGateway{})
	pulumi.RegisterInputType(reflect.TypeOf((*ApiGatewayArrayInput)(nil)).Elem(), ApiGatewayArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ApiGatewayMapInput)(nil)).Elem(), ApiGatewayMap{})
	pulumi.RegisterOutputType(ApiGatewayOutput{})
	pulumi.RegisterOutputType(ApiGatewayArrayOutput{})
	pulumi.RegisterOutputType(ApiGatewayMapOutput{})
}
